// Generated by delombok at Thu Jul 04 12:27:09 CEST 2024
package no.nav.melosys.eessi.metrikker;

import jakarta.annotation.PostConstruct;

import io.micrometer.core.instrument.Gauge;
import io.micrometer.core.instrument.MeterRegistry;
import no.nav.melosys.eessi.repository.SedMottattRepository;
import org.springframework.stereotype.Component;

//TODO: mÃ¥ erstattes med nye metrikker
@Component
@Deprecated(forRemoval = true)
public class FeilSedMottakMetrikker {
    @java.lang.SuppressWarnings("all")
    private static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(FeilSedMottakMetrikker.class);
    private final MeterRegistry meterRegistry;
    private final SedMottattRepository sedMottattRepository;

    public FeilSedMottakMetrikker(MeterRegistry meterRegistry, SedMottattRepository sedMottattRepository) {
        this.meterRegistry = meterRegistry;
        this.sedMottattRepository = sedMottattRepository;
    }

    @PostConstruct
    public void initGauge() {
        Gauge.builder(MetrikkerNavn.SED_MOTTATT_FEILET_DEPRECATED, this, v -> sedMottattRepository.countByFeiletIsTrue()).register(meterRegistry);
    }
}
